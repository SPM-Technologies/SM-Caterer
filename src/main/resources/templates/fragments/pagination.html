<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<!-- Pagination Fragment -->
<div th:fragment="pagination(baseUrl)" class="d-flex justify-content-between align-items-center mt-3">
    <!-- Info -->
    <div class="text-muted small">
        <span th:text="#{pagination.showing}">Showing</span>
        <span th:text="${currentPage * pageSize + 1}">1</span> -
        <span th:text="${(currentPage + 1) * pageSize > totalItems ? totalItems : (currentPage + 1) * pageSize}">10</span>
        <span th:text="#{pagination.of}">of</span>
        <span th:text="${totalItems}">100</span>
        <span th:text="#{pagination.items}">items</span>
    </div>

    <!-- Pagination Controls -->
    <nav th:if="${totalPages > 1}" aria-label="Page navigation">
        <ul class="pagination pagination-sm mb-0">
            <!-- First -->
            <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                <a class="page-link" th:href="@{${baseUrl}(page=0, size=${pageSize}, sortBy=${sortBy}, sortDir=${sortDir})}"
                   th:title="#{pagination.first}">
                    <i class="bi bi-chevron-double-left"></i>
                </a>
            </li>
            <!-- Previous -->
            <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                <a class="page-link" th:href="@{${baseUrl}(page=${currentPage - 1}, size=${pageSize}, sortBy=${sortBy}, sortDir=${sortDir})}"
                   th:title="#{pagination.previous}">
                    <i class="bi bi-chevron-left"></i>
                </a>
            </li>

            <!-- Page Numbers -->
            <th:block th:with="startPage=${currentPage > 2 ? currentPage - 2 : 0}, endPage=${currentPage + 2 < totalPages ? currentPage + 2 : totalPages - 1}">
                <!-- Show first page if not in range -->
                <li class="page-item" th:if="${startPage > 0}">
                    <a class="page-link" th:href="@{${baseUrl}(page=0, size=${pageSize}, sortBy=${sortBy}, sortDir=${sortDir})}">1</a>
                </li>
                <li class="page-item disabled" th:if="${startPage > 1}">
                    <span class="page-link">...</span>
                </li>

                <!-- Page range -->
                <li class="page-item" th:each="i : ${#numbers.sequence(startPage, endPage)}"
                    th:classappend="${i == currentPage} ? 'active'">
                    <a class="page-link" th:href="@{${baseUrl}(page=${i}, size=${pageSize}, sortBy=${sortBy}, sortDir=${sortDir})}"
                       th:text="${i + 1}">1</a>
                </li>

                <!-- Show last page if not in range -->
                <li class="page-item disabled" th:if="${endPage < totalPages - 2}">
                    <span class="page-link">...</span>
                </li>
                <li class="page-item" th:if="${endPage < totalPages - 1}">
                    <a class="page-link" th:href="@{${baseUrl}(page=${totalPages - 1}, size=${pageSize}, sortBy=${sortBy}, sortDir=${sortDir})}"
                       th:text="${totalPages}">10</a>
                </li>
            </th:block>

            <!-- Next -->
            <li class="page-item" th:classappend="${currentPage >= totalPages - 1} ? 'disabled'">
                <a class="page-link" th:href="@{${baseUrl}(page=${currentPage + 1}, size=${pageSize}, sortBy=${sortBy}, sortDir=${sortDir})}"
                   th:title="#{pagination.next}">
                    <i class="bi bi-chevron-right"></i>
                </a>
            </li>
            <!-- Last -->
            <li class="page-item" th:classappend="${currentPage >= totalPages - 1} ? 'disabled'">
                <a class="page-link" th:href="@{${baseUrl}(page=${totalPages - 1}, size=${pageSize}, sortBy=${sortBy}, sortDir=${sortDir})}"
                   th:title="#{pagination.last}">
                    <i class="bi bi-chevron-double-right"></i>
                </a>
            </li>
        </ul>
    </nav>

    <!-- Page Size Selector -->
    <div class="d-flex align-items-center gap-2">
        <label class="text-muted small mb-0" th:text="#{pagination.perPage}">Per page:</label>
        <select class="form-select form-select-sm" style="width: auto;"
                onchange="window.location.href=this.value">
            <option th:each="s : ${#lists.toList({10, 25, 50, 100})}"
                    th:value="@{${baseUrl}(page=0, size=${s}, sortBy=${sortBy}, sortDir=${sortDir})}"
                    th:text="${s}"
                    th:selected="${s == pageSize}">10</option>
        </select>
    </div>
</div>
</body>
</html>
